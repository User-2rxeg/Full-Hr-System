Requirement Name	Req ID	User Story ID	User Stories Needed (Titles)	Inputs Needed from Other Sub‑Systems	Downstream Sub‑Systems Depending on This Output	BR ID(s)	Key Business Rules
1. Policy Setup: Configuration & Management

Policy Configuration Initiation	REQ-001	REQ-001	As an HR Admin, I want to initiate the leave configuration process so that I can define and manage leave policies within the system.	None (Internal system control)	None	1, 25	The HR and System Admin need to define the ‘Leave types’. System admin configures approval workflows.

Admin Authentication	REQ-002	REQ-002	As an HR Admin, I want to authenticate my administrator credentials so that I can securely access the leave configuration settings.	Employee Profile (User credentials for secure login).	None	NFR-14	All users shall authenticate via secure login and role-based access control.


Configure Leave Settings (Accrual, Carry-over, Rounding)	REQ-003	REQ-003	As an HR Admin, I want to configure leave settings (e.g., accrual rates, maximum carry-over, waiting periods) so that the system adheres to our organizational policies.	Employee Profile (Employment Type for accrual rate determination).	Balance Tracking	9, 10, 20, 42	Employee balance must be accrued monthly/quarterly/yearly based on employment type (Monthly accrual = (Number of eligible months worked) × (Monthly Rate)). Set carry-over rules, expiration dates, and caps. The system must allow HR admins to define rounding methods (No Rounding, Rounded Arithmetically, Always Rounded Up, Always Rounded Down). Both the actual value (pre-rounded) and the rounded value must both be saved in the database.


Update Entitlement Calculations/Scheduling	REQ-005	REQ-005	As an HR Admin, I want to update entitlement calculations and scheduling logic so that leave balances are accurately computed and scheduling respects the new rules.	None	Balance Tracking	23	Leave duration must be calculated net of non-working days, based on the employee’s work schedule and country/location-specific calendars.


Create and Manage Leave Types	REQ-006	REQ-006	As an HR Admin, I want to create and manage different leave types (e.g., Annual leave, sick leave, Accidental leave, Compensation Leave, Mission Leave, Marriage Leave, etc.  ) so that employees can request appropriate leave categories.	None	Payroll (Paycode linkage).	1, 2, 3, 4, 6	The HR and System Admin need to defined the ‘Leave types’ as (Annual, Accidental, Sick/Medical, Unpaid, Maternity/Paternity, Wedding, etc.). Each leave type has a unique code. Leave types need to be linked to related ‘Leave Categories’ (‘Annual Leaves’ are deducted from balance; ‘Other’ will not affect the annual balance). The system allows the HR users to create/rename/edit in leave types.


Set Eligibility Rules	REQ-007	REQ-007	As an HR Admin, I want to set eligibility rules for each leave type (e.g., minimum tenure, employee type) so that leave is granted according to company policy.	Employee Profile (Tenure, employment contract type).	Request Workflow (Validation)	8, 22	Define any rule variations by position, job grade, tenure, location, or contract type according to the national labor law. System admin needs to set the range of days (entitlement rules) that may affect the employee’s earnings.


Assign Personalized Entitlements	REQ-008	REQ-008	As an HR Admin, I want to assign personalized leave entitlements to individual employees or groups so that specific agreements or adjustments can be accommodated.	Employee Profile (Individual contract data).	Request Workflow (Validation)	7	Vacation Package needs to be defined by the system (e.g. Vacation Package for Egyptians, Vacation Package for Foreigners). Each package has a unique code on the system, with specific entitlements according to the national labor law.

Configure Leave Parameters (Duration, Notice, Workflow)	REQ-009	REQ-009	As an HR Admin, I want to configure leave parameters such as maximum duration, notice periods, and approval workflows so that the leave process is clearly defined and manageable.	Organizational Structure (For defining approval hierarchy).	Approval Workflow	24	Multi-level approval chains should be defined per position (e.g., Manager → HR → Director).

Configure Calendar & Blocked Days	REQ-010	REQ-010	As an HR Admin, I want to set calendars and blocked days (e.g., public holidays, company closures) so that these are automatically considered in leave calculations and scheduling.	Time Management (Employee’s work schedule/days off).	Leave Request (Duration Calculation)	33, 55	Public holidays (i.e. official holiday calendar) and weekends must be excluded from leave count where applicable. HR might set up the system to have Leave Block Periods where HR can block leave requests during specific periods (e.g., end-of-year closing; exams’ taking place).

Configure Special Absence/Mission Types	REQ-011	REQ-011	As an HR Admin, I want to configure special absence/mission types (e.g., bereavement, jury duty) with specific rules so that these unique leave scenarios are handled correctly.	None	Payroll	39, 41, 40	The system needs to account for Miscellaneous leaves that includes (Hajj leave, leave for contact with an infected person, or special leaves ‘i.e. for exams, or marriage’ etc.) according to the national labor law. Sick leave must track cumulatively over a 3-year cycle (max 360 days). The system must track the number of times an employee has taken maternity leave.

Define Legal Leave Year & Reset Rules	REQ-012	REQ-012	As an HR Admin, I want to define legal leave year and reset rules so that leave balances are reset according to the applicable regulations and company policy.	None	Balance Tracking	5	A criterion date needs to be set for the vacations to be reset. It could be either (Hire date, First Vacation Date, Revised Hire Date, or Work Receiving Date).

Manual Balance Adjustment	REQ-013	REQ-013	As an HR Admin, I want to manually adjust employee leave balances (e.g., for corrections, carry-overs, or one-time grants) so that leave records are accurate.	None	Audit Log, Balance Tracking	12, 16, 17	Any manual adjustments (e.g., encashment, carryover, or corrections) must be tracked and visible in audit logs. Each and every vacation adjustment must be traced and stored in real-time with timestamp, HR user ID, and reason for audit trail.

Manage Roles & Permissions	REQ-014	REQ-014	As an HR Admin, I want to manage user roles and permissions related to leave (e.g., who can request, approve, or view leave) so that access is controlled and secure.	Organizational Structure (Security roles).	System Security/Audit	25, 41	Leave requests must pass through predefined, role-based approval. Role-based access must allow strict confidentiality of data.




2. Leave Request Management & Workflow

Submit New Leave Request	REQ-015	REQ-015	As an employee, I want to submit a new leave request with details (leave type, dates, justification, and attachments) so that my absence can be reviewed and approved according to company policy.	Employee Profile (Identity, employment status).	Approval Workflow (REQ-020)	25, 29, 31	Employees submit leave requests in person or through the leaves’ portal. If total leave > entitlement → convert to unpaid or block. System should automatically check for overlapping dates with approved leaves.

Attach Supporting Documents	REQ-016	REQ-016	As an employee, I want to attach documents (e.g., a doctor’s note) to my leave request so that HR and my manager have the required proof for specialized leave types.	None	HR Review (REQ-028)	54	The HR must set up the system to require documentation for specific leave types (e.g., Medical certificate for Sick leave > 1 day, Maternity leave, Bereavement leave).

Modify Pending Request	REQ-017	REQ-017	As an employee, I want to modify a leave request so that I can correct mistakes or update details without having to start over.	None	Approval Workflow	(Implicit)	The system supports modifications... for pending requests.

Cancel Pending Request	REQ-018	REQ-018	As an employee, I want to cancel my leave request before final approval so that it does not proceed unnecessarily.	None	Balance Tracking	18	If approved leaves are canceled or rescheduled, the system must automatically recalculate and return days to the balance.

Employee Notifications (Status)	REQ-019	REQ-019	As an employee, I want to receive notifications when my leave request is approved, rejected, returned for correction, or modified so that I am always informed about the progress.	None	Employee (Notification System)	27	Automated notification of submissions, approval, rejection, complaint or cancellation.

Manager Review Request	REQ-020	REQ-020	As a direct manager, I want to review leave requests assigned to me so that I can ensure team operations are not disrupted.	Organizational Structure (Reporting hierarchy).	Approval Workflow	25	Manager approves or declines as per work needs.

Manager Approval	REQ-021	REQ-021	As a direct manager, I want to approve leave requests so that employees can take time off according to policy.	None	Approval Workflow (HR Finalization)	25	Manager approves or declines as per work needs.

Manager Rejection	REQ-022	REQ-022	As a direct manager, I want to reject leave requests that do not meet operational or policy requirements so that the employee is informed and operations are maintained.	None	Approval Workflow	25	Manager approves or declines as per work needs.

Manager Notifications (Assignment)	REQ-024	REQ-024	As a direct manager, I want to receive notifications when a new leave request is assigned to me so that I can review it promptly.	None	Manager (Notification System)	27, 28	The system should be set to issue Alerts (Automated) in cases of Overdue approval... If request had been filed for more than 48 hrs and is yet pending → escalate. Automated notification of submissions.

HR Finalize Approved Requests	REQ-025	REQ-025	As an HR manager, I want to finalize approved leave requests in the system so that employee records are updated and payroll is adjusted accordingly.	None	Payroll, Time Management, Balance Tracking	25	HR admin reviews for compliance with HR leaves’ guidelines.

HR Override Manager Decision	REQ-026	REQ-026	As an HR manager, I want to override a manager’s decision in special circumstances so that exceptions to policy can be handled appropriately.	None	Balance Tracking, Audit Log	25, 48	The HR admin can escalate employee requests and override managers’ decisions if needed. The system must not allow negative vacation balances unless explicitly permitted by company policy or HR override.

Bulk Request Processing	REQ-027	REQ-027	As an HR manager, I want to process multiple leave requests at once so that large volumes of requests can be managed efficiently.	None	Approval Workflow	(Implicit)	The system supports... bulk approvals/rejections.

Verify Medical Documents	REQ-028	REQ-028	As an HR manager, I want to verify medical leave documents so that only legitimate claims are approved.	Leave Request (Attachments)	Audit Log	41, 54	The system should allow for attachment (medical certificate) for validation. Medical certificate required for sick leave > 1 day.

Auto Update Balance (Post-Approval)	REQ-029	REQ-029	As an HR manager, I want the system to automatically update leave balances after final approval so that records remain accurate.	None	Balance Tracking	32	Leave balance must update in real time upon request submission, or approval or cancellation.

Finalization Notification (Internal)	REQ-030	REQ-030	As an HR manager, I want the system to notify the employee, the employee’s manager, and the attendance coordinator when a leave request is finalized so that everyone is informed.	None	Stakeholders (Notification System)	27	Automated notification of submissions, approval, rejection, complaint or cancellation.

Submit Post-Leave Request	REQ-031	REQ-031	As an employee, I want to be able to submit my leave request after the leave by a maximum configured period, so that I can submit my leave after taking it due to emergencies.	None	Approval Workflow	(Implicit)	(Explicit process requirement from US).



3. Tracking, Reporting, and Integration

Employee View Current Balance	REQ-031	REQ-031	As an employee, I want to view my current leave balance so that I can plan my future leave requests.	None	Employee Dashboard	14, 32, 20	System Display must show Accrued vacation days, Vacation days taken and Vacation balance available. Balance display should reflect: Taken, Remaining, Pending, Carry-over. For the employee view, the used rounded vacation balance must be displayed in the employee dashboard.

Employee View Past History	REQ-032	REQ-032	As an employee, I want to see my past leave requests and their statuses so that I can keep track of my leave usage over time.	None	Employee Dashboard	(Implicit)	The module reflects vacation history by dates (i.e. leave balance tracking) showing vacations due, encashment and carryover leaves if any.

Employee Filter History	REQ-033	REQ-033	As an employee, I want to filter and sort my leave history by leave type, date range, and status so that I can quickly find specific requests.	None	Employee Dashboard	(Implicit)	The process also supports filtering and sorting based on various parameters (leave type, department, date range, status).

Manager View Team Balances	REQ-034	REQ-034	As a manager, I want to view my team members’ leave balances and upcoming leaves so that I can manage workloads effectively.	Organizational Structure (Team hierarchy).	Manager Dashboard	46	HR admins and direct supervisor/manger must have access to absence reports.

Manager Filter Team Data	REQ-035	REQ-035	As a manager, I want to filter and sort leave data by leave type, date range, department, and status so that I can quickly analyze patterns.	None	Manager Dashboard	(Implicit)	The process also supports filtering and sorting based on various parameters (leave type, department, date range, status).

Manually Flag Irregular Patterns	REQ-039	REQ-039	As a direct manager, I want to be able to flag irregular leaving patterns in employees’ leave history.	None	Performance Management	(Implicit)	Managers or HR staff monitor patterns, spot irregularities, and take corrective actions.

Automatic Leave Accrual	REQ-040	REQ-040	As an HR Manager, I want the system to automatically add leave days to each employee’s balance according to company policy so that entitlements stay accurate without manual calculation.	Time Management (Actual service days).	Balance Tracking	10	An employee’s balance must be accrued monthly/quarterly/yearly based on employment type.

Automatic Carry-Forward Processing	REQ-041	REQ-041	As an HR Manager, I want to year-end/period carry-forward to run automatically so that unused days move correctly within caps and expiry rules.	None	Balance Tracking	9, 42	Set carry-over rules, expiration dates, and caps. Max carry forward: 45 days (customizable). Must be used within 1–2 years or encashed.

Accrual Suspension/Adjustment	REQ-042	REQ-042	As an HR Manager I want to accrual suspension/adjustment during unpaid leave or long absence so that balances reflect true entitlement.	Time Management (Unpaid leave periods).	Balance Tracking	11, 15	The system should pause accrual during unpaid leave and suspensions. The system must exclude these periods when calculating eligibility and accrual. The system calculates the balance based on actual service days, excluding unpaid leave or absence.

Real-time Payroll Synchronization (Deductions, Encashment, Final Settlement)	REQ-042	REQ-042	As an HR Manager I want to automatically sync with the payroll system in real-time so that salary deductions or adjustments are calculated without delays.	Payroll (Daily salary rate).	Payroll, Time Management	22, 44, 52	Approved leaves (paid/unpaid) change payroll calculations, deductions or encashments and must sync in real time with payroll. If an employee is terminated or resigns, remaining leave balance must be automatically converted to encashment or deducted based on final settlement rules. If unapproved absences are recorded, an Unpaid Leave Deduction is calculated as (Base Salary / Work Days in Month) × Unpaid Leave Days.





Leaves Module Workflow
Phase 1: Policy Configuration and Setup (HR Admin / System Admin)
This phase establishes the foundational rules that govern all subsequent leave requests.

Step	Action	Actor	Key Business Rule(s)

1.1 Define Core Types & Categories	HR Admin defines leave types (Annual, Sick, Maternity, Unpaid) (REQ-006).	HR Admin	Each leave type must have a unique code. Types must be linked to categories, specifying if they are deducted from the annual balance or not.

1.2 Configure Entitlements	HR Admin sets Vacation Packages (BR 7) and eligibility rules (REQ-007), often varying by tenure, grade, or contract type.	HR Admin	Entitlement rules must adhere to the range of days set by national labor law. Personalized entitlements can be assigned to individuals.

1.3 Set Accrual, Carry-over, and Reset	HR Admin defines how balances accrue (monthly/quarterly/yearly) (REQ-003, REQ-040) and sets carry-over limits (REQ-041).	HR Admin	Accrual must pause during unpaid leave and suspensions (BR 11). A criterion date must be set for vacation reset (e.g., Hire date or Work Receiving Date).

1.4 Configure Workflows & Integrations	System Admin defines the multi-level approval chain (REQ-009) and links leave types to specific Payroll Paycodes (BR 6).	System Admin	Approval chains are defined per position. Approved leaves must sync daily with Payroll for deductions and Time Management for attendance records (REQ-042).

1.5 Set Calendars & Blocked Days	HR Admin uploads national/organizational holidays (REQ-010) and defines Leave Block Periods (BR 55).	HR Admin	Leave duration must be calculated net of non-working days (BR 23), excluding public holidays and weekends.


Phase 2: Leave Request and Approval (Core Transaction Lifecycle)
This process covers the submission, validation, review, and final processing of a single leave request.

Step	Action	Actor	Key Business Rule(s)

2.1 Submission and Documentation	Employee submits a request (REQ-015) via self-service, detailing dates, type, and justification. They upload supporting documents (REQ-016) if required (e.g., medical certificate for sick leave > 1 day).	Employee	Must allow submission of a post-leave request by a maximum configured period (REQ-031).

2.2 System Validation & Conflict Check	System checks the request against: Eligibility (BR 8), Balance (BR 31), Leave Overlap with existing approved leave (BR 31), and Team Conflict (BR 28, 31).	System	If Total Leave > Entitlement, the system must either convert to unpaid or block the request (BR 29).

2.3 Manager Approval	The request is routed to the Line Manager/Supervisor per the Organizational Structure's reporting line. The Manager reviews (REQ-020) and approves/rejects (REQ-021/022).	Head of Department	Manager can delegate approval authority during absence (REQ-023). If pending for > 48 hours, the request must auto-escalate (BR 28).

2.4 HR Compliance Review & Override	The HR Admin reviews the request (REQ-025) for compliance against policies and performs document verification (REQ-028).	HR Admin	HR can override a manager's decision in special circumstances (REQ-026). HR ensures the leave adheres to rules like sick leave cumulative limits (BR 41).

2.5 Finalization and Synchronization	Upon final approval, the system automatically: 1. Updates Leave Balance (REQ-029) showing pending, taken, and remaining values. 2. Notifies all stakeholders (REQ-030). 3. Syncs the absence to Time Management (blocking the employee’s attendance record) (REQ-042). 4. Syncs the pay component status to Payroll (REQ-042).	System	Leave balance must update in real time. If unapproved absences are later recorded, vacation days may be deducted retroactively based on HR decision (BR 19).


Phase 3: Tracking, Monitoring, and Auditing
This continuous process ensures data integrity, compliance, and oversight.


Step	Action	Actor	Key Business Rule(s)

3.1 Continuous Accrual	System automatically adds accrued days to the employee balance (REQ-040).	System	Accrual rate is based on employment type and service days.

3.2 Year-End Processing	System automatically runs carry-forward calculation (REQ-041) at the defined reset date.	System	Carry-forward must adhere to defined caps (e.g., max 45 days) and expiry rules.

3.3 Audit & Manual Adjustment	HR performs manual adjustments (REQ-013) for corrections or overrides.	HR Admin	All manual adjustments must be traced and stored in real-time with timestamp, HR user ID, and reason for audit trail (BR 17).

3.4 Final Settlement (Termination/Resignation)	HR triggers the offboarding process (OFF-013).	HR Manager	Remaining leave balance must automatically convert to encashment or deduction based on final settlement rules (BR 52). Encashment calculation follows the formula: [Daily salary rate] × [Number of unused leave days, capped at 30] (BR 53).


Futher Elaboration
Step	Actor	Action / Process	Supporting User Stories (US) and Rules (BR)	Outputs & Data Flow

Phase I: Policy Setup and Administration

1. Define Leave Types and Entitlements	HR Admin	Configure Core Policies and Leave Types: Initiate configuration [REQ-001] to create/manage leave types (Annual, Sick, Mission) [REQ-006, REQ-011, BR 1, BR 469]. Define eligibility rules (min tenure, employee type) [REQ-007, BR 7]. Assign personalized entitlements [REQ-008, BR 22].	US: REQ-001, REQ-006, REQ-007, REQ-008, REQ-011. BR: 1 (Define types), 7 (Eligibility), 22 (Rule variations).	Output: Defined Leave Catalog & Eligibility Matrix. Data Flow: Employee Profile reads tenure, grade, contract type.

2. Configure Accrual, Carry-Over, and Scheduling	HR Admin	Set Financial and Time Rules: Configure accrual rates and carry-over caps [REQ-003, BR 5, BR 10, BR 42]. Define duration & notice periods [REQ-009]. Set public holidays & blocked days [REQ-010]; exclude from leave count [BR 23, BR 33, BR 34].	US: REQ-003, REQ-009, REQ-010. BR: 5 (Accrual), 9 (Carry-over), 23 (Exclude non-working), 33 (Exclude holidays).	Output: Accrual Schedules; Holiday Calendar. Data Flow: Links to Time Mgmt (TM) & Payroll.

3. Manage System Access and Manual Adjustments	HR Admin, System Admin	Maintain System Integrity: Manage roles/permissions [REQ-014]. Adjust balances [REQ-013, BR 16]. Pause accrual during unpaid leave/suspension [BR 11].	US: REQ-013, REQ-014. BR: 11 (Pause accrual), 12 (Track adjustments), 16 (Manual adj.), 48 (Prevent negative).	Output: Adjusted Balances. Data Flow: Audit log tracks user, timestamp, reason.

Phase II: Leave Request Submission and Approval

4. Employee Submits Request	Employee	Create Request and Attach Proof: Submit leave request [REQ-015]; attach docs [REQ-016, BR 54]. Modify/cancel pending requests [REQ-017, REQ-018]. Submit after leave within grace period [REQ-031 (src 163)].	US: REQ-015, REQ-016, REQ-017, REQ-018, REQ-031. BR: 25 (Portal submission), 54 (Docs required).	Output: Leave Request (Submitted). Data Flow: Validation (balance, overlap); Notifications (N-050).

5. Manager Approves/Rejects/Delegates	Direct Manager	Review and Route: Review [REQ-020]. Approve/reject [REQ-021, REQ-022]. Delegate approvals [REQ-023].	US: REQ-020, REQ-021, REQ-022, REQ-023. BR: 24 (Multi-level), 26 (Delegation), 47 (Flag deduction).	Output: Request Status Change. Data Flow: Notifications (N-051) to employee.

6. HR Finalizes and Verifies Compliance	HR Manager	Final Review & Override: Finalize approvals [REQ-025]. Verify documents [REQ-028, BR 41]. Override manager decisions [REQ-026, BR 479]. Bulk processing [REQ-027].	US: REQ-025–REQ-028. BR: 25 (HR compliance), 41 (Verify docs).	Output: Final Approval (Logged). Data Flow: System trigger to auto-update.

7. System Automates Updates	System (Auto)	Update Balances & Sync Data: Auto-update balances [REQ-029, BR 32]. Notify stakeholders [REQ-030, N-053]. Sync payroll [REQ-042 (src 169), BR 692].	US: REQ-029–REQ-030, REQ-042. BR: 32 (Balance update), 27 (Auto notifications).	Output: Updated Balances & Notifications. Data Flow: Payroll & Time Mgmt sync.


Phase III: Tracking, Monitoring, and Auditing

8. Employee Tracks Usage	Employee	View History and Balances: View current balance [REQ-031 (src 165), BR 14]. View past requests [REQ-032]. Filter by type/date/status [REQ-033].	US: REQ-031–REQ-033. BR: 14 (Display balances).	Output: Accessible History. Data Flow: Analytics logs self-service usage.

9. Manager Flags Irregular Patterns	Direct Manager	Monitor Team and Identify Risk: View team leaves [REQ-034]. Flag irregular patterns [REQ-039]. Receive alerts [REQ-037, BR 28].	US: REQ-034, REQ-037, REQ-039. BR: 28 (Alerts), 46 (Manager access).	Output: Irregularity Alert. Data Flow: Analytics & Notifications (N-060).

10. Handle End-of-Period Adjustments	HR Manager	Automate Carry-Forward and Accrual: Add leave days [REQ-040]. Run year-end carry-forward [REQ-041, BR 9].	US: REQ-040–REQ-041. BR: 9 (Carry-over).	Output: Updated Entitlements. Data Flow: Payroll receives new balances.

11. Process Final Settlement	HR Manager, Payroll Specialist	Manage Exit Encashment: Convert remaining leave balance to encashment/deduction [BR 489, BR 53]. Send offboarding notification [OFF-013, BR 53].	US: —. BR: 489 (Encashment conversion), 53 (Limits/formula).	Output: Final Payout Data. Data Flow: Offboarding & Payroll integration.
